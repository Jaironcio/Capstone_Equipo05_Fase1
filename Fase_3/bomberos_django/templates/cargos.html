{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Proyecto SEIS - Sistema de Cargos</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <link rel="stylesheet" href="{% static 'css/global-profesional.css' %}">
    <link rel="stylesheet" href="{% static 'css/cargos-sanciones.css' %}">
    <link rel="stylesheet" href="{% static 'css/tema-bomberil.css' %}">
    <link rel="stylesheet" href="{% static 'css/cargos-custom.css' %}">
</head>
<body>
    <div class="page-container cargos-page">
        <div class="container">
            <div class="page-header cargos-header">
                 <button type="button" class="btn btn-secondary" onclick="cargosSistema.volverAlSistema()">
            â† Volver
        </button>
                <h2>ğŸ‘” SISTEMA DE CARGOS Y AÃ‘OS DE SERVICIO</h2>
                <p>Registro y Control de Cargos DesempeÃ±ados por Bomberos</p>
            </div>

            <div class="page-content">
                <div id="mensajeCargos" class="mensaje-global" style="display: none;"></div>

                <div class="bombero-info">
                    <h3>ğŸ‘¤ InformaciÃ³n del Bombero</h3>
                    <div class="bombero-datos" id="bomberoDatosCargos">
                        <!-- Datos cargados por JavaScript -->
                    </div>
                </div>

                <div class="form-container">
                    <h3>ğŸ“‹ Registro de Nuevo Cargo</h3>
                    
                    <form id="formCargo">
                        <input type="hidden" id="bomberoCargoId" name="bomberoCargoId">
                        <input type="hidden" id="cargoIdEditando" name="cargoIdEditando">
                        
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="aÃ±oCargo" class="opcional">AÃ±o</label>
                                <input type="number" id="aÃ±oCargo" name="aÃ±oCargo" min="1950" max="2030"
                                       placeholder="Ej: 2024">
                                <div class="error" id="error-aÃ±oCargo"></div>
                            </div>

                            <div class="form-group full-width">
    <label class="opcional">â­ Cargos de Comandancia</label>
    <select id="cargoComandancia" name="cargoComandancia" onchange="cargosSistema.seleccionarCargo('comandancia')">
        <option value="">Seleccione cargo de comandancia</option>
        <option value="Superintendente">Superintendente</option>
        <option value="Comandante 1">1er Comandante</option>
        <option value="Comandante 2">2do Comandante</option>
        <option value="Comandante 3">3er Comandante</option>
        <option value="Intendente General">Intendente General</option>
        <option value="Tesorero General">Tesorero General</option>
        <option value="Secretario General">Secretario General</option>
        <option value="Ayudante General">Ayudante General</option>
    </select>
</div>

<div class="form-group full-width">
    <label class="opcional">ğŸ‘” Cargos de CompaÃ±Ã­a</label>
    <select id="cargoCompania" name="cargoCompania" onchange="cargosSistema.seleccionarCargo('compania')">
        <option value="">Seleccione cargo de compaÃ±Ã­a</option>
        <option value="CapitÃ¡n">CapitÃ¡n</option>
        <option value="Director">Director</option>
        <option value="Secretario">Secretario</option>
        <option value="Tesorero">Tesorero</option>
        <option value="CapellÃ¡n">CapellÃ¡n</option>
        <option value="Intendente">Intendente</option>
        <option value="Teniente Primero">Teniente Primero</option>
        <option value="Teniente Segundo">Teniente Segundo</option>
        <option value="Teniente Tercero">Teniente Tercero</option>
        <option value="Teniente Cuarto">Teniente Cuarto</option>
    </select>
</div>

<div class="form-group full-width">
    <label class="opcional">âš–ï¸ Consejos de CompaÃ±Ã­a</label>
    <select id="cargoConsejo" name="cargoConsejo" onchange="cargosSistema.seleccionarCargo('consejo')">
        <option value="">Seleccione cargo de consejo</option>
        <option value="Miembro Consejo de Disciplina de CÃ­a">Miembro Consejo de Disciplina de CÃ­a</option>
        <option value="Miembro Junta Calificadora">Miembro Junta Calificadora</option>
        <option value="Miembro Junta Revisora de Cuentas">Miembro Junta Revisora de Cuentas</option>
    </select>
</div>

<div class="form-group full-width">
    <label class="opcional">ğŸ”§ Cargos de Confianza</label>
    <select id="cargoTecnico" name="cargoTecnico" onchange="cargosSistema.seleccionarCargo('tecnico')">
        <option value="">Seleccione cargo de confianza</option>
        <option value="Jefe de MÃ¡quinas">Jefe de MÃ¡quinas</option>
        <option value="Maquinista 1Â°">Maquinista 1Â°</option>
        <option value="Maquinista 2Â°">Maquinista 2Â°</option>
        <option value="Maquinista 3Â°">Maquinista 3Â°</option>
        <option value="Ayudante">Ayudante</option>
        <option value="Ayudante 1Â°">Ayudante 1Â°</option>
        <option value="Ayudante 2Â°">Ayudante 2Â°</option>
        <option value="Ayudante 3Â°">Ayudante 3Â°</option>
    </select>
</div>

<input type="hidden" id="tipoCargo" name="tipoCargo">

                            <div class="form-group">
                                <label for="fechaInicioCargo" class="opcional">Desde</label>
                                <input type="date" id="fechaInicioCargo" name="fechaInicioCargo">
                                <div class="error" id="error-fechaInicioCargo"></div>
                            </div>

                            <div class="form-group">
                                <label for="fechaFinCargo" class="opcional">Hasta</label>
                                <input type="date" id="fechaFinCargo" name="fechaFinCargo">
                                <div class="error" id="error-fechaFinCargo"></div>
                            </div>

                         

                            <div class="form-group full-width">
                                <label for="observacionesCargo" class="opcional">Observaciones / Otros Cargos Ocupados en el Mismo AÃ±o Calendario</label>
                                <textarea id="observacionesCargo" name="observacionesCargo" rows="3" 
                                          placeholder="Observaciones adicionales u otros cargos desempeÃ±ados en el mismo aÃ±o"></textarea>
                                <div class="error" id="error-observacionesCargo"></div>
                            </div>

                            <div class="info-nota">
                                ğŸ’¡ <strong>Nota:</strong> Debe completar al menos uno de los siguientes campos: <strong>AÃ±o</strong>, <strong>Cargo</strong> o <strong>Desde</strong>
                            </div>
                        </div>

                        <div class="buttons">
                            <button type="submit" class="btn btn-cargo">Registrar Cargo</button>
                            <button type="button" class="btn btn-secondary" onclick="cargosSistema.limpiarFormulario()">Limpiar Formulario</button>
                        </div>
                    </form>
                </div>

                <div class="section-header-cargos">
                    <h2>ğŸ“š Historial de Cargos</h2>
                    <div class="header-actions-cargos">
                        <button type="button" class="btn-export-pdf" onclick="cargosSistema.exportarPDF()">
                            ğŸ“„ EXPORTAR PDF
                        </button>
                        <button type="button" class="btn-export-excel" onclick="cargosSistema.exportarExcel()">
                            ğŸ“Š DESCARGAR EXCEL
                        </button>
                    </div>
                </div>

                <div class="contador">
                    Total de cargos registrados: <strong id="totalCargos">0</strong>
                </div>
                
                <div id="listaCargos" class="lista-items"></div>

                <div class="navigation-buttons">
                    <button type="button" class="btn btn-volver" onclick="cargosSistema.volverAlSistema()">
                        â† Regresar al Sistema Principal
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- LibrerÃ­a jsPDF para generar PDFs -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

    <!-- Scripts -->
    <script src="{% static 'js/auth_django.js' %}"></script>
    <script src="{% static 'js/utils.js' %}"></script>
    <script src="{% static 'js/cargos-django.js' %}?v=9.0"></script>
    <script src="{% static 'js/cargar-logo-auto.js' %}?v=1.0"></script>
</body>
</html>